# CRM-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –°–¢–û (Car Service CRM)

–ü—Ä–æ—î–∫—Ç —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏—Ö —Ä–æ–±—ñ—Ç –∑ –∫—É—Ä—Å—ñ "–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ü–ó".
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –ø—Ä–æ—Ü–µ—Å—ñ–≤ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ –Ω–∞ –°–¢–û.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫
* **Backend:** Python 3.10 + FastAPI
* **Frontend:** React.js + Vite
* **Database:** PostgreSQL 15
* **Infrastructure:** Docker & Docker Compose

## üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç
–î–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Docker.

1.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ—î–∫—Ç:**
    ```bash
    docker-compose up -d --build
    ```

## üåê –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤
–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤:

* **Frontend (–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞):** üëâ [http://localhost:5173](http://localhost:5173)
    *–¢—É—Ç –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–ª—ñ—î–Ω—Ç—ñ–≤/–∞–≤—Ç–æ —Ç–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –∑–∞–ø–∏—Å–∏.*

* **Backend API (Swagger UI):** üëâ [http://localhost:8000/docs](http://localhost:8000/docs)
    *–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤.*

---

## üìë API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (–ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 4)
–ó–≥—ñ–¥–Ω–æ –∑ –≤–∏–º–æ–≥–∞–º–∏, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç API —É —Ñ–æ—Ä–º–∞—Ç—ñ OpenAPI (Contract First).

* üìÑ **OpenAPI –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è:** [docs/api/openapi.yaml](docs/api/openapi.yaml) 

  * üì∏ **–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è (Swagger Editor):**
  
    ![Swagger Editor Screenshot](docs/api/swagger_screenshot1.png)
    ![Swagger Editor Screenshot](docs/api/swagger_screenshot2.png)
*   ![Swagger Editor Screenshot](docs/api/swagger_screenshot3.png)
---

## üìö –ü—Ä–æ—î–∫—Ç–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
–í—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø–æ –ø—Ä–æ—î–∫—Ç—É –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –ø–∞–ø—Ü—ñ `docs/`:

* **–ë—ñ–∑–Ω–µ—Å-–∞–Ω–∞–ª—ñ–∑:** [docs/business_doc.md](docs/business_doc.md) (–í–∏–º–æ–≥–∏, –†–æ–ª—ñ, –°—Ü–µ–Ω–∞—Ä—ñ—ó) 
* **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:** [docs/architecture_diagram.png](docs/architecture_diagram.png) 
* **Roadmap:** [docs/roadmap.md](docs/roadmap.md) (–ü–ª–∞–Ω —Ä–æ–∑–≤–∏—Ç–∫—É) 
* **DDD (Domain Driven Design):** [docs/domain/](docs/domain/) (–ì–ª–æ—Å–∞—Ä—ñ–π, –°—É—Ç–Ω–æ—Å—Ç—ñ, Context Map) 
* **ADR (Architectural Decision Records):** [docs/adr/](docs/adr/) (–§—ñ–∫—Å–∞—Ü—ñ—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏—Ö —Ä—ñ—à–µ–Ω—å) 

---

## üìã –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–∏–º–æ–≥ (Log)

## üìã –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–∏–º–æ–≥ (Log)

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 1. –ë–∞–∑–æ–≤–∏–π –∫–ª—ñ—î–Ω—Ç ‚Äì –±–µ–∫–µ–Ω–¥ ‚Äì –ë–î
* [cite_start]–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑–≤'—è–∑–æ–∫ Frontend -> Backend REST API -> PostgreSQL[cite: 1111, 1072].
* [cite_start]–°–µ—Ä–≤–µ—Ä –Ω–∞ FastAPI –∑ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ CRUD –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏[cite: 1101, 1120].

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 2. –ë—ñ–∑–Ω–µ—Å-–¥–æ–∫—É–º–µ–Ω—Ç —ñ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
* [cite_start]–°—Ñ–æ—Ä–º–æ–≤–∞–Ω–æ –±—ñ–∑–Ω–µ—Å-–≤–∏–º–æ–≥–∏ —Ç–∞ Roadmap [cite: 1063-1065].
* –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ Git Flow (Fork -> Pull Request).

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 3. Domain-Driven Design (DDD)
* –í–∏–¥—ñ–ª–µ–Ω–æ –ø—ñ–¥–¥–æ–º–µ–Ω–∏ (CRM, Service Operations, Billing).
* [cite_start]–°—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏ –¥–æ–º–µ–Ω–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π (Entities)[cite: 1066].

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 4. –ú—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–∏ —Ç–∞ –ö–æ–Ω—Ç—Ä–∞–∫—Ç API
* –û–±—Ä–∞–Ω–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏–π —Å—Ç–∏–ª—å: **–ú–æ–¥—É–ª—å–Ω–∏–π –ú–æ–Ω–æ–ª—ñ—Ç** (–∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ –≤ ADR-0001).
* –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —à–∞—Ä—É–≤–∞—Ç—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É: `API` -> `Service (CRUD)` -> `Domain` (–∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ –≤ ADR-0002).
* [cite_start]–û–ø–∏—Å–∞–Ω–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç API (`openapi.yaml`) —Ç–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —á–µ—Ä–µ–∑ Pydantic[cite: 1104].

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 5. Resilience & Error Handling
* **Backend Middleware:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ Rate Limiting (429 Too Many Requests) —Ç–∞ –∫–æ—Ä–µ–ª—è—Ü—ñ—é –∑–∞–ø–∏—Ç—ñ–≤ —á–µ—Ä–µ–∑ `X-Request-Id`.
* **Idempotency:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –º–µ—Ö–∞–Ω—ñ–∑–º —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ –¥–ª—è POST-–∑–∞–ø–∏—Ç—ñ–≤ (—á–µ—Ä–µ–∑ `Idempotency-Key`).
* **Smart Client:** –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `fetchWithResilience` –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º–∏ —Ä–µ—Ç—Ä–∞—è–º–∏ (backoff + jitter).
* **Degraded Mode:** –î–æ–¥–∞–Ω–æ UI-—Ä–µ–∂–∏–º "–ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è" –ø—Ä–∏ –∑–±–æ—è—Ö —Å–µ—Ä–≤–µ—Ä–∞.

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 6. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è (Docker)
* **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:** –£—Å–ø—ñ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ `docker run hello-world`.
* **Dockerfiles:** –°—Ç–≤–æ—Ä–µ–Ω–æ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ `Dockerfile` –¥–ª—è `backend` (Python) —Ç–∞ `sto-crm-frontend` (Node/Nginx).
* [cite_start]**Orchestration:** –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ `docker-compose.yml`, —â–æ –ø—ñ–¥–Ω—ñ–º–∞—î 3 —Å–µ—Ä–≤—ñ—Å–∏ (`web`, `api`, `db`) –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é [cite: 1142-1143].
---
### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 7. CI/CD (GitHub Actions)
–ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π pipeline –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, –∑–±—ñ—Ä–∫–∏ —Ç–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó Docker-–æ–±—Ä–∞–∑—ñ–≤ —É GitHub Container Registry (GHCR).

**–í–∏–∫–æ–Ω–∞–Ω—ñ Style Points (–∑–≥—ñ–¥–Ω–æ –≤–∏–º–æ–≥):**
1.  [cite_start]**–°–µ–º–∞–Ω—Ç–∏—á–Ω–µ —Ç–µ–≥—É–≤–∞–Ω–Ω—è –æ–±—Ä–∞–∑—ñ–≤[cite: 623]:**
    * –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ–≥—ñ–≤: `latest` (–¥–ª—è main), `sha-<commit_hash>` (–¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞–Ω–æ—Å—Ç—ñ) —Ç–∞ `vX.Y.Z` (–ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ GitHub Release).
2.  [cite_start]**–ü–æ—Å–∏–ª–µ–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–∞ Concurrency[cite: 630]:**
    * –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `concurrency: group ... cancel-in-progress: true` –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó —Ä–µ—Å—É—Ä—Å—ñ–≤ (—Å–∫–∞—Å—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –±—ñ–ª–¥—ñ–≤ –ø—Ä–∏ –Ω–æ–≤–∏—Ö –ø—É—à–∞—Ö).
    * –ú—ñ–Ω—ñ–º—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∞ —Ç–æ–∫–µ–Ω–∞ (`permissions: contents: read, packages: write`).
3.  [cite_start]**–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —à–≤–∏–¥–∫–æ–¥—ñ—ó (Best Practices)[cite: 635]:**
    * –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∫–µ—à—É–≤–∞–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (`npm` —Ç–∞ `pip`) –¥–ª—è –ø—Ä–∏—à–≤–∏–¥—à–µ–Ω–Ω—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è.
    * –î–æ–¥–∞–Ω–æ `paths-ignore` –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó, —â–æ–± –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –≤–∞–∂–∫—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `README.md`.
## üë• –ö–æ–º–∞–Ω–¥–∞
* **Backend / DevOps:** –ö—É—â –ê.–î.
* **Frontend:** –í–æ–π—Ç–æ–≤–∏—á –ú. –ê.